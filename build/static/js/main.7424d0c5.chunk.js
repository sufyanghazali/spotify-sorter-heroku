(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,n){},18:function(e,t){var n=function(e,t,n,a){var c,r,i;c=e[a],e[a]=e[n],e[n]=c,r=t;for(var l=t;l<n;l++)if(s(e[l],c)){var o=[e[r],e[l]];e[l]=o[0],e[r]=o[1],r++}return i=r,e[n]=e[i],e[i]=c,i},a=function e(t,a,s){var c,r;s>a&&(c=Math.floor((a+s)/2),e(t,a,(r=n(t,a,s,c))-1),e(t,r+1,s))},s=function(e,t){return Date.parse(e.track.album.release_date)<Date.parse(t.track.album.release_date)};e.exports={partition:n,quickSort:function(e){a(e,0,e.length-1)},quickSortRecursive:a,compareTracks:s,compare:function(e,t){var n,a,s=0;return(n=Date.parse(e.track.album.release_date))<(a=Date.parse(t.track.album.release_date))?s=-1:a>n&&(s=1),s}}},43:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(17),r=n.n(c),i=n(3),l=n.n(i),o=n(6),u=n(4),d=n(5),j=n.n(d),p=(n(16),n(0));var f=function(e){var t=e.song;return console.log(t),Object(p.jsxs)("div",{className:"song",children:[Object(p.jsx)("img",{className:"song-image",src:t.track.album.images[2].url,alt:"song"}),Object(p.jsxs)("div",{className:"song-info",children:[Object(p.jsx)("div",{className:"song-title",children:t.track.name}),Object(p.jsx)("div",{className:"song-artist",children:t.track.artists[0].name})]})]})};var b=function(e){var t=e.onClick;return Object(p.jsx)("button",{onClick:function(){return t()},children:"Sort"})};var h=function(e){var t=e.onClick,n=e.sorted;return Object(p.jsx)("button",{onClick:function(){return t()},disabled:!n,children:"Save"})},m=n(18);var v=function(e){var t=e.playlist,n=e.access_token,s=e.onExit,c=Object(a.useState)(!1),r=Object(u.a)(c,2),i=r[0],d=r[1],v=Object(a.useState)([]),x=Object(u.a)(v,2),O=x[0],y=x[1];Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(t.tracks.href,{headers:{Authorization:"Bearer ".concat(n)}});case 2:a=e.sent,s=a.data.items;case 4:if(!(s.length<a.data.total)){e.next=11;break}return e.next=7,j.a.get(t.tracks.href,{params:{offset:s.length,limit:100},headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data.items}));case 7:c=e.sent,s=s.concat(c),e.next=4;break;case 11:y(s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d(!1),function(){e.apply(this,arguments)}()}),[t,n]);var g=O.map((function(e,t){return Object(p.jsx)(f,{song:e},e.track.id)})),k=function(){var e=Object(o.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return a=O.map((function(e){return e.track.uri})),e.next=4,j.a.put("https://api.spotify.com/v1/playlists/".concat(t.id,"/tracks"),{uris:a.slice(0,100)},{headers:{Authorization:"Bearer ".concat(n)}}).then(Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length>100)){e.next=8;break}s=100;case 2:if(!(s<a.length)){e.next=8;break}return e.next=5,j.a.post("https://api.spotify.com/v1/playlists/".concat(t.id,"/tracks"),{uris:a.slice(s,s+100)},{headers:{Authorization:"Bearer ".concat(n)}});case 5:s+=100,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}));case 4:d(!i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"playlist",children:[Object(p.jsx)("button",{className:"playlist--button-exit",onClick:function(){return s()},children:Object(p.jsx)("svg",{role:"img",focusable:"false",height:"24",width:"24",viewBox:"0 0 24 24",className:"button-back",children:Object(p.jsx)("polyline",{points:"16 4 7 12 16 20",fill:"none",stroke:"#181818"})})}),Object(p.jsxs)("div",{className:"playlist-header",children:[Object(p.jsx)("div",{className:"playlist-image",children:Object(p.jsx)("img",{src:t.images[0].url,alt:t.name})}),Object(p.jsxs)("div",{className:"metadata",children:[Object(p.jsx)("h1",{className:"playlist-name",children:t.name}),Object(p.jsx)("span",{children:t.owner.display_name}),Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsx)(b,{onClick:function(){console.log(i);var e=O.sort(m.compare).reverse();y(e),!i&&d(!i)}}),Object(p.jsx)(h,{onClick:k,sorted:i})]})]})]}),Object(p.jsx)("div",{children:g})]})},x=function(){var e=Object(a.useState)(window.innerWidth),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){var e=function(){return s(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{width:n}},O=function(e){var t=e.playlist,n=e.onPlaylistSelect,a=e.selectedPlaylist;return Object(p.jsxs)("div",{className:"playlist-item ".concat(a&&a.name===t.name?"active":""),onClick:function(){return n(t)},children:[Object(p.jsx)("div",{className:"list-image",children:Object(p.jsx)("img",{src:t.images[2].url,alt:t.name})}),Object(p.jsx)("div",{className:"list-info",children:t.name})]})};var y=function(e){var t=e.playlist,n=e.onPlaylistSelect,a=e.selectedPlaylist;return Object(p.jsx)("div",{className:"playlist-item ".concat(a&&a.name===t.name?"active":""),onClick:function(){return n(t)},children:t.name})},g=function(e){var t=e.playlist,n=e.onPlaylistSelect,a=e.selectedPlaylist;return x().width<768?Object(p.jsx)(O,{playlist:t,onPlaylistSelect:n,selectedPlaylist:a}):Object(p.jsx)(y,{playlist:t,onPlaylistSelect:n,selectedPlaylist:a})};var k=function(e){var t=e.playlists,n=e.onPlaylistSelect,a=e.selectedPlaylist,s=t.map((function(e){return Object(p.jsx)(g,{playlist:e,onPlaylistSelect:n,selectedPlaylist:a},e.id)}));return Object(p.jsx)("div",{className:"playlists ".concat(a?"disable-scroll":""),children:s})},w=function(e){var t=e.access_token,n=Object(a.useState)([]),s=Object(u.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(null),d=Object(u.a)(i,2),f=d[0],b=d[1];Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data.items}));case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);return Object(p.jsxs)("div",{className:"dashboard",children:[Object(p.jsx)(k,{playlists:c,onPlaylistSelect:function(e){b(e)},selectedPlaylist:f}),Object(p.jsx)("div",{className:"playlist-container ".concat(f?"playlist-slidein":""),children:f?Object(p.jsx)(v,{playlist:f,access_token:t,onExit:function(){b(null)}}):null})]})};var N=function(){return Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("h1",{className:"login-header",children:"Sortify"}),Object(p.jsx)("a",{className:"spotify spotify-btn spotify-btn-login",href:"https://spotify-sorting-app.herokuapp.com/login",children:"Login with Spotify"})]})},S=new URLSearchParams(window.location.search).get("access_token");var P=function(){return S?Object(p.jsx)(w,{access_token:S}):Object(p.jsx)(N,{})};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7424d0c5.chunk.js.map