(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(t,e){var s=function(t,e,s,n){var r,c,i;r=t[n],t[n]=t[s],t[s]=r,c=e;for(var o=e;o<s;o++)if(a(t[o],r)){var l=[t[c],t[o]];t[o]=l[0],t[c]=l[1],c++}return i=c,t[s]=t[i],t[i]=r,i},n=function t(e,n,a){var r,c;a>n&&(r=Math.floor((n+a)/2),t(e,n,(c=s(e,n,a,r))-1),t(e,c+1,a))},a=function(t,e){return Date.parse(t.track.album.release_date)<Date.parse(e.track.album.release_date)};t.exports={partition:s,quickSort:function(t){n(t,0,t.length-1)},quickSortRecursive:n,compareTracks:a,compare:function(t,e){var s,n,a=0;return(s=Date.parse(t.track.album.release_date))<(n=Date.parse(e.track.album.release_date))?a=-1:n>s&&(a=1),a}}},46:function(t,e,s){"use strict";s.r(e);var n=s(1),a=s.n(n),r=s(16),c=s.n(r),i=(s(7),s(4)),o=s.n(i),l=s(6),u=s(17),d=s(18),p=s(21),h=s(20),j=s(3),f=s.n(j),v=s(19),m=s(0);var b=function(t){var e=t.song;return Object(m.jsxs)("div",{className:"ui item grid",children:[Object(m.jsx)("div",{className:"content nine wide column",children:Object(m.jsx)("div",{className:"header",children:e.track.name})}),Object(m.jsx)("div",{className:"content five wide column",children:Object(m.jsx)("div",{className:"description",children:e.track.artists[0].name})})]})};var k=function(t){var e=t.songs.map((function(t){return Object(m.jsx)(b,{song:t},t.track.id)}));return Object(m.jsx)("ul",{children:e})};var x=function(t){var e=t.playlist,s=t.onPlaylistSelect;return Object(m.jsx)("div",{className:"playlist-item item",onClick:function(){return s(e)},children:e.name})};var g=function(t){var e=t.playlists,s=t.onPlaylistSelect,n=e.map((function(t){return Object(m.jsx)(x,{playlist:t,onPlaylistSelect:s},t.id)}));return Object(m.jsx)("div",{className:"ui relaxed divided list",children:n})};var O=function(t){var e=t.onClick;return Object(m.jsx)("button",{className:"ui button primary",onClick:function(){return e()},children:"Sort"})};var y=function(t){var e=t.onClick,s=t.sorted;return Object(m.jsx)("button",{className:"ui button",onClick:function(){return e()},disabled:s,children:"Save"})},S=function(t){Object(p.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(u.a)(this,s),(n=e.call(this,t)).onPlaylistSelect=function(){var t=Object(l.a)(o.a.mark((function t(e){var s,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get(e.tracks.href,{headers:{Authorization:"Bearer ".concat(n.props.access_token)}});case 2:s=t.sent,a=s.data.items;case 4:if(!(a.length<s.data.total)){t.next=11;break}return t.next=7,f.a.get(e.tracks.href,{params:{offset:a.length,limit:100},headers:{Authorization:"Bearer ".concat(n.props.access_token)}}).then((function(t){return t.data.items}));case 7:r=t.sent,a=a.concat(r),t.next=4;break;case 11:console.log(a),n.setState({selectedPlaylist:e,songs:a,sorted:!1});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.onSortButtonClicked=function(){var t=n.state.songs.sort(v.compare).reverse();n.setState({songs:t,sorted:!0})},n.onSaveButtonClicked=function(){if(n.state.sorted){var t=n.state.songs.map((function(t){return t.track.uri}));f.a.put("https://api.spotify.com/v1/playlists/".concat(n.state.selectedPlaylist.id,"/tracks"),{uris:t.slice(0,100)},{headers:{Authorization:"Bearer ".concat(n.props.access_token)}}).then((function(){if(t.length>100)for(var e=100;e<t.length;)f.a.post("https://api.spotify.com/v1/playlists/".concat(n.state.selectedPlaylist.id,"/tracks"),{uris:t.slice(e,e+=100)},{headers:{Authorization:"Bearer ".concat(n.props.access_token)}}),e+=100})).catch((function(t){t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers)):t.request?console.log(t.request):console.log("Error",t.message),console.log(t.config)})),n.setState({sorted:!1})}},n.state={playlists:[],selectedPlaylist:null,songs:[],sorted:!1},n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var t=Object(l.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer ".concat(this.props.access_token)}}).then((function(t){return t.data.items}));case 2:e=t.sent,this.setState({playlists:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(m.jsx)("div",{className:"ui container dashboard",children:Object(m.jsx)("div",{className:"ui grid",children:Object(m.jsxs)("div",{className:"ui row",children:[Object(m.jsx)("div",{className:"three wide column",children:Object(m.jsx)(g,{playlists:this.state.playlists,onPlaylistSelect:this.onPlaylistSelect})}),Object(m.jsx)("div",{className:"ten wide column",children:Object(m.jsx)(k,{songs:this.state.songs})}),Object(m.jsxs)("div",{className:"three wide column",children:[Object(m.jsx)(O,{onClick:this.onSortButtonClicked}),Object(m.jsx)(y,{onClick:this.onSaveButtonClicked,sorted:!this.state.sorted})]})]})})})}}]),s}(a.a.Component);var w=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("a",{className:"btn btn-success btn-lg",href:"https://spotify-sorting-app.herokuapp.com/login",children:"Login with Spotify"})})},N=new URLSearchParams(window.location.search).get("access_token");var C=function(){return N?Object(m.jsx)(S,{access_token:N}):Object(m.jsx)(w,{})};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))},7:function(t,e,s){}},[[46,1,2]]]);
//# sourceMappingURL=main.d824e079.chunk.js.map